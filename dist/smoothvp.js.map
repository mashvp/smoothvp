{"version":3,"sources":["../node_modules/tornis/dist/tornis.js","utils.js","index.js"],"names":["onInit","callback","document","addEventListener","later","timeout","setTimeout","Smoothvp","Easing","EASE_OUT_SINE","EASE_OUT_CUBIC","EASE_OUT_QUINT","EASE_OUT_CIRC","EASE_OUT_QUAD","EASE_OUT_QUART","EASE_OUT_EXPO","EASE_OUT_BACK","container","content","spacer","direction","handlers","update","getTranslation","y","handleViewportUpdate","scroll","size","changed","event","Event","top","style","transform","percent","getBoundingClientRect","height","diff","window","innerHeight","innerWidth","type","forEach","handler","dispatch","width","x","spacerSize","smooth","duration","timingFunction","undefined","orientation","navigator","userAgent","indexOf","key","code","which","preventDefault","stopPropagation","contentHeight","contentWidth","scrollY","createElement","classList","add","parentElement","appendChild","overflow","position","transformOrigin","Array","from","querySelectorAll","child","contains","transition","unsmooth","removeChild","Object","prototype","hasOwnProperty","call","Error","push","removeEventListener","index","splice"],"mappings":"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","file":"smoothvp.js","sourceRoot":"../src","sourcesContent":["!function(t,s){\"object\"==typeof exports&&\"undefined\"!=typeof module?s(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],s):(t=t||self,s(t.tornis={}))}(this,function(t){\"use strict\";function s(t,s){let i=0;return function(...e){const h=(new Date).getTime();if(!(h-i<t))return i=h,s(...e)}}function i(t){return Math.floor(t.reduce((t,s)=>t+s,0)/t.length)}const e=\"undefined\"==typeof window;class h{constructor(){e||(this.lastX=0,this.lastY=0,this.lastWidth=window.innerWidth,this.lastHeight=window.innerHeight,this.lastMouseX=0,this.lastMouseY=0,this.scrollHeight=document.body.scrollHeight,this.scrollChange=!1,this.sizeChange=!1,this.mouseChange=!1,this.currX=0,this.currY=0,this.currWidth=window.innerWidth,this.currHeight=window.innerHeight,this.currMouseX=0,this.currMouseY=0,this.mouseXVelocity=[],this.mouseYVelocity=[],this.lastMouseXVelocity=0,this.lastMouseYVelocity=0,this.updating=!1,this.callbacks=[],this.update=this.update.bind(this),this.handleResize=this.handleResize.bind(this),this.handleMouse=this.handleMouse.bind(this),this.formatData=this.formatData.bind(this),this.watch=this.watch.bind(this),this.unwatch=this.unwatch.bind(this),this.handleResize=s(110,this.handleResize),this.handleMouse=s(75,this.handleMouse),window.addEventListener(\"resize\",this.handleResize),window.addEventListener(\"mousemove\",this.handleMouse),requestAnimationFrame(this.update))}handleResize(t){this.currWidth=window.innerWidth,this.currHeight=window.innerHeight}handleMouse(t){this.currMouseX=t.clientX,this.currMouseY=t.clientY}formatData(){return{scroll:{changed:this.scrollChange,left:Math.floor(this.lastX),right:Math.floor(this.lastX+this.lastWidth),top:Math.floor(this.lastY),bottom:Math.floor(this.lastY+this.lastHeight),velocity:{x:Math.floor(this.scrollXVelocity)||0,y:Math.floor(this.scrollYVelocity)||0}},size:{changed:this.sizeChange,x:Math.floor(this.lastWidth),y:Math.floor(this.lastHeight),docY:Math.floor(this.scrollHeight)},mouse:{changed:this.mouseChange,x:Math.floor(this.lastMouseX),y:Math.floor(this.lastMouseY),velocity:{x:Math.floor(this.lastMouseXVelocity)||0,y:Math.floor(this.lastMouseYVelocity)||0}}}}update(){const{currWidth:currWidth,currHeight:currHeight,currMouseX:currMouseX,currMouseY:currMouseY}=this;if(this.updating)return!1;this.scrollChange=this.sizeChange=this.mouseChange=!1,window.pageXOffset==this.lastX&&0!=this.scrollXVelocity&&(this.scrollXVelocity=0,this.scrollChange=!0),window.pageYOffset==this.lastY&&0!=this.scrollYVelocity&&(this.scrollYVelocity=0,this.scrollChange=!0),window.pageXOffset!=this.lastX&&(this.scrollChange=!0,this.scrollXVelocity=Math.floor(window.pageXOffset-this.lastX),this.lastX=window.pageXOffset),window.pageYOffset!=this.lastY&&(this.scrollChange=!0,this.scrollYVelocity=Math.floor(window.pageYOffset-this.lastY),this.lastY=window.pageYOffset),currWidth!=this.lastWidth&&(this.lastWidth=currWidth,this.scrollHeight=document.body.scrollHeight,this.sizeChange=!0),currHeight!=this.lastHeight&&(this.lastHeight=currHeight,this.sizeChange=!0),this.mouseXVelocity.length>5&&this.mouseXVelocity.shift(),this.mouseXVelocity.push(currMouseX-this.lastMouseX),i(this.mouseXVelocity)!=this.lastMouseXVelocity&&(this.lastMouseXVelocity=i(this.mouseXVelocity),this.mouseChange=!0),currMouseX!=this.lastMouseX&&(this.lastMouseX=currMouseX,this.mouseChange=!0),this.mouseYVelocity.length>5&&this.mouseYVelocity.shift(),this.mouseYVelocity.push(currMouseY-this.lastMouseY),i(this.mouseYVelocity)!=this.lastMouseYVelocity&&(this.lastMouseYVelocity=i(this.mouseYVelocity),this.mouseChange=!0),currMouseY==this.lastMouseY&&0==i(this.mouseYVelocity)||(this.lastMouseY=currMouseY,this.mouseChange=!0),(this.scrollChange||this.sizeChange||this.mouseChange)&&this.callbacks.forEach(t=>t(this.formatData())),this.updating=!1,requestAnimationFrame(this.update)}watch(t,s=!0){if(\"function\"!=typeof t)throw new Error(\"Value passed to Watch is not a function\");if(!e){if(s){const s=this.formatData();s.scroll.changed=!0,s.mouse.changed=!0,s.size.changed=!0,t(s)}this.callbacks.push(t)}}unwatch(t){if(\"function\"!=typeof t)throw new Error(\"The value passed to unwatch is not a function\");e||(this.callbacks=this.callbacks.filter(s=>s!==t))}}const o=new h;e||(window.__TORNIS={watchViewport:o.watch,unwatchViewport:o.unwatch,getViewportState:o.formatData});const a=o.watch,l=o.unwatch,n=o.formatData;t.getViewportState=n,t.unwatchViewport=l,t.watchViewport=a,Object.defineProperty(t,\"__esModule\",{value:!0})});\n","export const onInit = callback => document.addEventListener('DOMContentLoaded', callback);\n\nexport const later = (callback, timeout = 10) => {\n  if (timeout === 0) {\n    callback();\n  } else {\n    setTimeout(callback, timeout);\n  }\n};\n","import { watchViewport, unwatchViewport } from 'tornis';\n\nimport { later } from './utils';\n\nexport const Easing = {\n  EASE_OUT_SINE: 'cubic-bezier(0.39, 0.575, 0.565, 1)',\n  EASE_OUT_CUBIC: 'cubic-bezier(0.215, 0.61, 0.355, 1)',\n  EASE_OUT_QUINT: 'cubic-bezier(0.23, 1, 0.32, 1)',\n  EASE_OUT_CIRC: 'cubic-bezier(0.075, 0.82, 0.165, 1)',\n  EASE_OUT_QUAD: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n  EASE_OUT_QUART: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n  EASE_OUT_EXPO: 'cubic-bezier(0.19, 1, 0.22, 1)',\n  EASE_OUT_BACK: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n};\n\nconst Smoothvp = (container, content, { direction = 'vertical' } = {}) => {\n  const handlers = { update: [] };\n  let spacer;\n\n  const addEventListener = (event, handler) => {\n    if (!Object.prototype.hasOwnProperty.call(handlers, event)) {\n      throw new Error(`Event '${event}' is not supported`);\n    }\n\n    handlers[event].push(handler);\n  };\n\n  const removeEventListener = (event, handler) => {\n    if (!Object.prototype.hasOwnProperty.call(handlers, event)) {\n      throw new Error(`Event '${event}' is not supported`);\n    }\n\n    const index = handlers[event].indexOf(handler);\n    if (index !== -1) {\n      handlers[event].splice(index, 1);\n    }\n  };\n\n  const dispatch = event => handlers[event.type].forEach(handler => handler(event));\n\n  const getTranslation = (y) => {\n    if (direction === 'horizontal') {\n      return `translate3D(${-y}px, 100vh, 0) rotate(-90deg)`;\n    }\n\n    return `translate3D(0, ${-y}px, 0)`;\n  };\n\n  const createSpacer = (height) => {\n    spacer = document.createElement('div');\n\n    spacer.classList.add('smoothvp-spacer');\n    spacer.style.height = `${height}px`;\n\n    container.parentElement.appendChild(spacer);\n  };\n\n  const handleViewportUpdate = ({ scroll, size }) => {\n    if (scroll.changed) {\n      const event = new Event('update');\n      const { top } = scroll;\n\n      if (direction === 'vertical') {\n        content.style.transform = getTranslation(top);\n        event.top = top;\n      } else {\n        const { height: spacerHeight } = spacer.getBoundingClientRect();\n        const percent = top / (spacerHeight - size.y);\n        const diff = window.innerHeight - window.innerWidth;\n\n        content.style.transform = getTranslation(top + diff * percent);\n        event.top = top;\n      }\n\n      dispatch(event);\n    }\n\n    if (size.changed) {\n      const { width } = spacer.getBoundingClientRect();\n      const { width: x, height: y } = content.getBoundingClientRect();\n\n      const spacerSize = direction === 'vertical' ? y : x;\n\n      spacer.style.height = `${spacerSize}px`;\n      container.style.width = `${width}px`;\n    }\n  };\n\n  const applyTabFix = () => {\n    document.addEventListener('keydown', (event) => {\n      const key = event.code || event.which;\n\n      if (key === 9 || key === 'Tab') {\n        event.preventDefault();\n        event.stopPropagation();\n        return false;\n      }\n    });\n  };\n\n  const smooth = ({ duration = 500, timingFunction = Easing.EASE_OUT_QUINT }) => {\n    if (\n      typeof window.orientation !== typeof undefined\n      || navigator.userAgent.indexOf('IEMobile') !== -1\n    ) return;\n\n    applyTabFix();\n\n    later(() => {\n      const { height: contentHeight, width: contentWidth } = content.getBoundingClientRect();\n      const { scrollY } = window;\n\n      createSpacer(direction === 'vertical' ? contentHeight : contentWidth);\n\n      container.style.overflow = 'hidden';\n      container.style.position = 'fixed';\n      container.style.height = direction === 'vertical' ? '100vh' : `${contentHeight}px`;\n      container.style.width = direction === 'vertical' ? `${contentWidth}px` : '';\n\n      if (direction === 'horizontal') {\n        content.style.transformOrigin = 'left top';\n        content.style.width = '100vh';\n\n        const children = Array.from(content.querySelectorAll('*'));\n\n        children.forEach((child) => {\n          if (child.classList.contains('smoothvp-rotate')) {\n            child.style.transformOrigin = 'center';\n            child.style.transform = 'rotate(90deg)';\n          }\n        });\n      }\n\n      content.style.transform = getTranslation(scrollY);\n      later(() => {\n        content.style.transition = `transform ${duration}ms ${timingFunction}`;\n      }, 10);\n\n      watchViewport(handleViewportUpdate);\n    });\n  };\n\n  const unsmooth = () => {\n    if (\n      typeof window.orientation !== typeof undefined\n      || navigator.userAgent.indexOf('IEMobile') !== -1\n    ) return;\n\n    later(() => {\n      spacer.parentElement.removeChild(spacer);\n\n      container.style.overflow = '';\n      container.style.position = '';\n      container.style.height = '';\n      container.style.width = '';\n\n      content.style.transform = '';\n      content.style.transition = '';\n\n      unwatchViewport(handleViewportUpdate);\n    });\n  };\n\n  return {\n    smooth,\n    unsmooth,\n    addEventListener,\n    removeEventListener,\n  };\n};\n\nSmoothvp.Easing = {\n  EASE_OUT_SINE: 'cubic-bezier(0.39, 0.575, 0.565, 1)',\n  EASE_OUT_CUBIC: 'cubic-bezier(0.215, 0.61, 0.355, 1)',\n  EASE_OUT_QUINT: 'cubic-bezier(0.23, 1, 0.32, 1)',\n  EASE_OUT_CIRC: 'cubic-bezier(0.075, 0.82, 0.165, 1)',\n  EASE_OUT_QUAD: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n  EASE_OUT_QUART: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n  EASE_OUT_EXPO: 'cubic-bezier(0.19, 1, 0.22, 1)',\n  EASE_OUT_BACK: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n};\n\nwindow.Smoothvp = Smoothvp;\nexport default Smoothvp;\n"]}